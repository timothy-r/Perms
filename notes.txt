A restful permissions service

What actions may actor perform on object?
GET /actor/object

manage actor permissions on object
PUT /actor/object

revoke all actor's permission to perform action on object
DELETE /actor/object


Where the service knows nothing about actor, action and object - can be any valid string

Are we creating resources - yes store the perms as an array of strings

What does the permission resource contain?
{
    "read:"1",
    "write":"1"
}

Either store perms as json or a flat array of keys
How to represent Perm data?

A simple StdClass be decoding json string?
    * simple
    * allows clients to mess with data

A first class Perm class instance?
    * better to manage setting keys

What operations on a perm (for a subject & object)

* Get the configured keys - application returns a json object
* Set the keys for a subject & object - application takes a json object & stores it
* Remove all keys for a subject & object - application deletes a Perm object

How to store perm values?

* One value per row
+ make object_id, object_type, subject_id, subject_type and value unique
+ execute inserts - if they fail the perm was already there so ok
+ how to remove?... we'd have to remove them all first

* All perm values in one field
+ Select with subject & object
+ if it doesn't exist then insert otherwise update
+ implement add($data) and update(Perm) in store
